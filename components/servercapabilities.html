<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Server.Capabilities | IOPA</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://iopa.io/components/servercapabilities.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://iopa.io/components/servercapabilities.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <link rel="stylesheet" href="/build/css/iopa-blue-7615250ef9.css">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="IOPA">
  <!-- Open Graph -->
  <meta name="description" content="A special key within every IOPA Context record">
<meta property="og:type" content="website">
<meta property="og:title" content="Server.Capabilities">
<meta property="og:url" content="https://iopa.io/components/servercapabilities.html">
<meta property="og:site_name" content="IOPA">
<meta property="og:description" content="A special key within every IOPA Context record">
<meta property="og:updated_time" content="2016-07-07T03:42:59.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Server.Capabilities">
<meta name="twitter:description" content="A special key within every IOPA Context record">
<meta name="twitter:site" content="iopa_io">
<meta property="fb:admins" content="tbd">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-TBD-10', 'auto');
  ga('send', 'pageview');
</script>

</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">IOPA</a>
    </h1>
    <nav id="main-nav">
      <a href="/docs/" class="main-nav-link">Documentation</a><a href="/components/" class="main-nav-link">Components</a><a href="/news/" class="main-nav-link">News</a><a href="/middleware/" class="main-nav-link">Middleware</a><a href="/specs/" class="main-nav-link">Specifications</a>
      <a href="https://github.com/iopa-io/iopa" class="main-nav-link"><i class="fa fa-github"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
      <select id="lang-select" data-canonical="components/servercapabilities.html">
        
          <option value="en" selected>English</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Server.Capabilities</h1>
                <a href="https://github.com/iopa-io/iopa-docs/edit/master/source/components/servercapabilities.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
                
                  <h5 class="article-subtitle" >A special key within every IOPA Context record</h5>
                
              </header>
              <div class="article-content" itemprop="articleBody">
                <h3 id="Server-Capabilities-Key" class="article-heading"><a href="#Server-Capabilities-Key" class="headerlink" title="Server Capabilities Key"></a>Server Capabilities Key<a class="article-anchor" href="#Server-Capabilities-Key" aria-hidden="true"></a></h3><p>The <code>&quot;Server.Capabilities&quot;</code> key exists in every IOPA context record.</p>
<figure class="highlight"><table><tr><td class="code"><pre><div class="line">context['server.Capabilities'] =  &#123;</div><div class="line">  "urn:io.iopa:demoapp:demomiddleware": "</div><div class="line">    &#123; </div><div class="line">      "demo.salutation": "hello world"</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It is used to store application level parameters or state that is either constant across the invocation of an application (e.g., location of certain functions or utility functions) OR is necessary during the individual processing of a Context record for the lifetime of the request (typically milliseconds).</p>
<p>The child values of this key are each uniquely identified by a URN associated with a particular application, middleware or IOPA extension.   The value of any grandchild keys are up to the application, middleware, or extension, but are useful way to pass configuration data and other application constant data that is not mutated or appropriate for the stores.  It can be added to for each Context record as a temporary memory that persists exactly for the lifetime of a context record and is not shared with other context records.</p>
<p>Most applications state should be handled in the stores (outside of the purview of IOPA, but mutated by IOPA action context records).   However just as the Context record is a form of temporary state that can be mutated by IOPA middleware (but doesnt persist unless the middleware has deliberate side-effects), the Server.Capabiltiies subsection is a special area that is hyrdrated at application start (or restart) and copied across (two layers deep) to each Context record.  </p>
<p>Any pre-configuration made in the top two levels of Server.Capabilities (e.g., the value itself or child object kept in the value) is generally copied to each Context records (policy can be changed by the specific implementation), but any changes below this are made available for temporary state for the lifetime of a single Context record only.</p>
<p>A context record including all the values in this key is disposed when the outermost AppFunc that invokes it is fulfilled.</p>
<h3 id="Server-Farm-Considerations" class="article-heading"><a href="#Server-Farm-Considerations" class="headerlink" title="Server Farm Considerations"></a>Server Farm Considerations<a class="article-anchor" href="#Server-Farm-Considerations" aria-hidden="true"></a></h3><p>The Server.Capabilities is a useful area for memory that must be copied to each server in server farm, and to be dehyrdated and re-hydrated across long running processes.  It is currently the only key in the specification that has such special persistence requirements.</p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2016-07-07T03:42:59.000Z" itemprop="dateModified">Last updated: 2016-07-07</time>
                <a href="appbuilder.html" class="article-footer-prev" title="AppBuilder"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="legacy.html" class="article-footer-next" title="Interoperating with Legacy"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
<section id="comments">
  <div id="disqus_thread"></div>
</section>
<script>
  var disqus_shortname = 'iopa';
  var disqus_url = 'https://iopa.io/components/servercapabilities.html';
  var disqus_title = "Server.Capabilities";
  var disqus_config = function(){
    this.language = 'en';
  };
  (function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'https://go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Server-Capabilities-Key"><span class="toc-text">Server Capabilities Key</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Server-Farm-Considerations"><span class="toc-text">Server Farm Considerations</span></a></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Components</strong><a href="index.html" class="sidebar-link">IOPA Context Record</a><a href="appfunc.html" class="sidebar-link">AppFunc Middleware</a><a href="appbuilder.html" class="sidebar-link">AppBuilder</a><a href="servercapabilities.html" class="sidebar-link current">Server.Capabilities</a><strong class="sidebar-title">Middleware and Servers</strong><a href="legacy.html" class="sidebar-link">Interoperating with Legacy</a><a href="readme-iopa-router.html" class="sidebar-link">Application Router</a><a href="readme-iopa-static.html" class="sidebar-link">Static Server</a><a href="readme-iopa-mount.html" class="sidebar-link">Path Mounter</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      Copyright &copy; 2016 <a href="https://iopa.io/" target="_blank">Internet of Protocols Alliance</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      <a href="https://twitter.com/iopa_io" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a>
      <a href="https://github.com/iopa-io/iopa" class="footer-link" target="_blank"><i class="fa fa-github"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/docs/" class="mobile-nav-link">Documentation</a><a href="/components/" class="mobile-nav-link">Components</a><a href="/news/" class="mobile-nav-link">News</a><a href="/middleware/" class="mobile-nav-link">Middleware</a><a href="/specs/" class="mobile-nav-link">Specifications</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/iopa-io/iopa" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Components</strong><a href="index.html" class="mobile-nav-link">IOPA Context Record</a><a href="appfunc.html" class="mobile-nav-link">AppFunc Middleware</a><a href="appbuilder.html" class="mobile-nav-link">AppBuilder</a><a href="servercapabilities.html" class="mobile-nav-link current">Server.Capabilities</a><strong class="mobile-nav-title">Middleware and Servers</strong><a href="legacy.html" class="mobile-nav-link">Interoperating with Legacy</a><a href="readme-iopa-router.html" class="mobile-nav-link">Application Router</a><a href="readme-iopa-static.html" class="mobile-nav-link">Static Server</a><a href="readme-iopa-mount.html" class="mobile-nav-link">Path Mounter</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="components/servercapabilities.html">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<script src="/build/js/main-d6635cef24.js"></script>
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>

<!-- Algolia -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript">
document.getElementById('search-input-wrap').classList.add('on');
docsearch({
  apiKey: 'aad27aa416b2ef8f02bf530f23234e2f',
  indexName: 'iopa',
  inputSelector: '#search-input'
});
</script>


</body>
</html>